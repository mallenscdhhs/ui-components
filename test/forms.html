<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Components</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="lib/react/react-with-addons.js"></script>
    <script src="ui-components.js"></script>
    <style>.btn{margin:0 3px;}</style>
  </head>
  <body style="padding: 2em;">

      <div id="test-form"></div>

      <script>
        var fieldsFixture = {
          'text' : {
            'type' : 'field',
            'config' : {
              type : 'text',
              name : 'test-text',
              label : 'Test Text',
              value : 'Testing Value Setting'
            }
          },
          'textarea' : {
            'type' : 'field',
            'config' : {            
              type : 'textarea',
              name : 'test-textarea',
              label : 'Test Textarea'
            }
          },
          'checkbox' : {
            'type' : 'field',
            'config' : {            
              type : 'checkbox',
              name : 'test-checkbox',
              label : 'Test Checkbox',
              options : {
                'items' : [
                  {
                    'label' : 'Checkbox 1',
                    'value' : '1'
                  },
                  {
                    'label' : 'Checkbox 2',
                    'value' : '2'
                  }        
                ]
              }
            }          
          },
          'radio' : {
            'type' : 'field',
            'config' : {            
              type : 'radio',
              name : 'test-radio',
              label : 'Test Radio',
              options : {
                'items' : [
                  {
                    'label' : 'Radio 1',
                    'value' : '1'
                  },
                  {
                    'label' : 'Radio 2',
                    'value' : '2'
                  }        
                ]
              }  
            }          
          },
          'select' : {
            'type' : 'field',
            'config' : {            
              type : 'select',
              name : 'test-select',
              label : 'Test Select',
              options : {
                'items' : [
                  {
                    'label' : 'Select 1',
                    'value' : '1'
                  },
                  {
                    'label' : 'Select 2',
                    'value' : '2'
                  }        
                ]
              }
            }            
          },
          'multiselect' : {
            'type' : 'field',
            'config' : {            
              type : 'multiselect',
              name : 'test-multiselect',
              label : 'Test MultiSelect',
              options : {
                'items' : [
                  {
                    'label' : 'MultiSelect 1',
                    'value' : '1'
                  },
                  {
                    'label' : 'MultiSelect 2',
                    'value' : '2'
                  }        
                ]
              } 
            }           
          },          
          'email' : {
            'type' : 'field',
            'config' : {            
              type : 'email',
              name : 'test-email',
              label : 'Test Email'
            }
          },
          'phone' : {
            'type' : 'field',
            'config' : {            
              type : 'phone',
              name : 'test-phone',
              label : 'Test Phone'
            }
          },
          'date' : {
            'type' : 'field',
            'config' : {            
              type : 'date',
              name : 'test-date',
              label : 'Test Date',
              required : true
            }
          },
          'password' : {
            'type' : 'field',
            'config' : {            
              type : 'password',
              name : 'test-password',
              label : 'Test Password'
            }
          }   
        };

        var fieldsetFixture = {
          'type' : 'fieldset',
          'config':{          
            'name' : 'Test Fieldset With All Fields',
            'layout' : {
              type: "grid", 
              config: {
                rows: [[{"md": "6"}]]
              }
            },
            'components' :[]
          }
        };

        // Add fields to components
        _.each(Object.keys(fieldsFixture),function(key,j){
          fieldsetFixture.config.components.push(fieldsFixture[key]);
        })

        var formFixture = {
          'name' : 'Test Form',
          'model' : {},
          'actions':[
            {
              'type' : 'link',            
              'config' : {
                'name' : 'Test Link Action',
                'url' : 'testURLHTTP'              
              }
            },
            {
              'type' : 'button',            
              'config' : {
                'name' : 'Test Button Action',
                'url' : 'testURLHTTP'              
              }
            }
          ],
          'rules': [],
          'layout' : {
            'type': "grid", 
            'config': {
              'rows': [[{'md': '6'}]]
            }
          },
          'components' :[{
            'type' : 'fieldset',
            'config':{
              'name' : 'Test Fieldset',
              'layout' : {
                'type': "grid", 
                'config': {
                  'rows': [[{'md': '4', 'sm': '2'}]]
                }
              },
              'components' :[{
                'type' :'field',
                'config' : { 
                  'type' : 'text',
                  'name' : 'test-text',
                  'label' : 'Test Text Field',
                  'required' : false,
                  'options' : { }
                }
              }]
            }  
          }]  
        };

        formFixture.components.push(fieldsetFixture);

        var Form = React.createFactory(Components.Form);
        var Q = Components.EventQueue;
        var i = 1;
        Q.subscribe('all','page-test',function(data){
          console.log('TestGlobalGotIt!'+JSON.stringify(data));
          formFixture.actions[1].config.name='Test Button Action '+i;
          i++;
          React.render(Form(formFixture),document.getElementById('test-form'));
        });

        React.render(Form(formFixture),document.getElementById('test-form'));

      </script>
  </body>
</html>
